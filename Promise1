// createOrder
// proceedtoPayment
// showOrderSummary
// updateWallet

const cart = ["shoes", "pants", "shirts"];

createOrder(cart)
  .then(function (orderId) {
    console.log(orderId);
    return orderId;
  })
  .then(function (orderId) {
    return proceedtoPayment(orderId);
  })
  .then(function (obj) {
    //console.log(message, "of amount:", amt);
    const a = obj.message;
    const b = obj.amt;
    return showOrderSummary(a, b);
  })
  .then(function (obj1) {
    console.log(obj1.message, obj1.amt);
    //console.log(obj1);
    //console.log("amt", amt);
  })
  .catch(function (err) {
    console.log(err.message);
  });

function showOrderSummary(paymentInfo, amt) {
  return new Promise(function (resolve, reject) {
    console.log(amt);
    if (amt >= 2000) {
      resolve({
        message: `You have ordered items that cost ${amt} rupees`,
        amt: amt,
      });
    } else {
      reject(new Error("Please buy more for discount"));
    }
  });
}

function proceedtoPayment(orderId) {
  return new Promise(function (resolve, reject) {
    resolve({ message: `Payment Succesful of Order ID ${orderId}`, amt: 2500 });
  });
}

function createOrder(cart) {
  return new Promise(function (resolve, reject) {
    if (!validateCart) {
      const err = new Error("Cart is not valid");
      reject(err);
    }

    const orderId = "12345";
    if (orderId) {
      setTimeout(function () {
        resolve(orderId);
      }, 5000);
    }
  });
}

function validateCart(cart) {
  return true;
}
